# TrainLCD Website

![Billboard](.github/images/billboard.png)

<p align="center">
  <strong>TrainLCDå…¬å¼Webã‚µã‚¤ãƒˆ | Official Website for TrainLCD</strong>
</p>

<p align="center">
  <a href="#æ—¥æœ¬èª">æ—¥æœ¬èª</a> | <a href="#english">English</a>
</p>

---

## æ—¥æœ¬èª

### ğŸ“– æ¦‚è¦

TrainLCD Webã‚µã‚¤ãƒˆã¯ã€TrainLCDã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å…¬å¼Webãƒ—ãƒ¬ã‚¼ãƒ³ã‚¹ã‚’æä¾›ã™ã‚‹ãƒ¢ãƒãƒ¬ãƒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒšãƒ¼ã‚¸ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚

### âœ¨ ä¸»ãªæ©Ÿèƒ½

- **ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ (LP)**: Astroã§æ§‹ç¯‰ã•ã‚ŒãŸé«˜é€Ÿã§è»½é‡ãªãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã‚µã‚¤ãƒˆ
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒšãƒ¼ã‚¸**: Next.jsã§æ§‹ç¯‰ã•ã‚ŒãŸãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚µãƒ¼ãƒ“ã‚¹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ 
  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°ï¼ˆSSEå¯¾å¿œï¼‰
  - å¤šè¨€èªã‚µãƒãƒ¼ãƒˆï¼ˆæ—¥æœ¬èª/è‹±èªï¼‰
  - ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå±¥æ­´ç®¡ç†
  - ã‚µãƒ¼ãƒ“ã‚¹ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®çŠ¶æ…‹è¡¨ç¤º

### ğŸ›  æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

#### ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **[Astro](https://astro.build/)** - ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ã®ãŸã‚ã®é«˜é€ŸãªWebãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **[Next.js 16](https://nextjs.org/)** - React App Routerãƒ™ãƒ¼ã‚¹ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒšãƒ¼ã‚¸
- **[React 19](https://react.dev/)** - UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **[Preact](https://preactjs.com/)** - Astroã‚¢ãƒ—ãƒªã§ã®è»½é‡ãªReactä»£æ›¿

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- **[PostgreSQL](https://www.postgresql.org/)** - ãƒ¡ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **[Prisma](https://www.prisma.io/)** - å‹å®‰å…¨ãªORMã¨ã‚¹ã‚­ãƒ¼ãƒç®¡ç†
- **[Redis](https://redis.io/)** - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡

#### é–‹ç™ºãƒ„ãƒ¼ãƒ«
- **[Turborepo](https://turbo.build/)** - é«˜é€Ÿãªãƒ¢ãƒãƒ¬ãƒãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ 
- **[TypeScript](https://www.typescriptlang.org/)** - å‹å®‰å…¨æ€§ã®ç¢ºä¿
- **[Vitest](https://vitest.dev/)** - é«˜é€Ÿãªãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **[ESLint](https://eslint.org/)** - ã‚³ãƒ¼ãƒ‰å“è³ªã®ä¿è¨¼
- **[Tailwind CSS](https://tailwindcss.com/)** - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®CSSãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

### ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
Website/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ lp/              # ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ (Astro)
â”‚   â””â”€â”€ status/          # ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒšãƒ¼ã‚¸ (Next.js)
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ eslint-config/   # å…±æœ‰ESLintè¨­å®š
â”‚   â””â”€â”€ typescript-config/ # å…±æœ‰TypeScriptè¨­å®š
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma    # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â””â”€â”€ seed.ts          # ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿
â””â”€â”€ turbo.json           # Turborepoè¨­å®š
```

### ğŸ“‹ å‰ææ¡ä»¶

- **Node.js**: 18ä»¥ä¸Š
- **npm**: 10.4.0ä»¥ä¸Š
- **PostgreSQL**: æœ€æ–°ã®å®‰å®šç‰ˆ
- **Redis**: æœ€æ–°ã®å®‰å®šç‰ˆ

### ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

#### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone https://github.com/TrainLCD/Website.git
cd Website
```

#### 2. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

#### 3. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

`.env.example` ã‚’ `.env` ã«ã‚³ãƒ”ãƒ¼ã—ã¦ã€å¿…è¦ãªç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¾ã™ï¼š

```bash
cp .env.example .env
```

**å¿…é ˆã®ç’°å¢ƒå¤‰æ•°ï¼š**

```env
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šæ–‡å­—åˆ—
DATABASE_URL="postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public"

# Redisæ¥ç¶šæ–‡å­—åˆ—
REDIS_URL="redis://localhost:6379"

# CORSè¨­å®šï¼ˆ/api/status/snapshot ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç”¨ï¼‰
ALLOWED_SNAPSHOT_ORIGINS="" # ç©º=ç„¡åŠ¹ã€"*"=å…¨ã¦è¨±å¯ã€ã¾ãŸã¯ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã®URL

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°APIèªè¨¼ã‚­ãƒ¼
STATUS_UPDATE_API_KEY="" # æœ¬ç•ªç’°å¢ƒã§ã¯å¿…ãšè¨­å®šã—ã¦ãã ã•ã„
```

#### 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# Prismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ç”Ÿæˆ
npx prisma generate

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ
npx prisma migrate dev

# ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
npm run db:seed
```

### ğŸ’» é–‹ç™º

#### ã™ã¹ã¦ã®ã‚¢ãƒ—ãƒªã‚’èµ·å‹•

```bash
npm run dev
```

- ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸: http://localhost:4321
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒšãƒ¼ã‚¸: http://localhost:3000

#### å€‹åˆ¥ã®ã‚¢ãƒ—ãƒªã‚’èµ·å‹•

```bash
# ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ã®ã¿
cd apps/lp
npm run dev

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒšãƒ¼ã‚¸ã®ã¿
cd apps/status
npm run dev
```

### ğŸ§ª ãƒ†ã‚¹ãƒˆã¨ãƒªãƒ³ãƒˆ

```bash
# ESLintã®å®Ÿè¡Œ
npm run lint

# ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆstatusã‚¢ãƒ—ãƒªï¼‰
cd apps/status
npm run test
```

### ğŸ—ï¸ ãƒ“ãƒ«ãƒ‰

```bash
# ã™ã¹ã¦ã®ã‚¢ãƒ—ãƒªã‚’ãƒ“ãƒ«ãƒ‰
npm run build

# å€‹åˆ¥ã®ã‚¢ãƒ—ãƒªã‚’ãƒ“ãƒ«ãƒ‰
cd apps/lp
npm run build

cd apps/status
npm run build
```

### ğŸ“¦ æœ¬ç•ªç’°å¢ƒã§ã®å®Ÿè¡Œ

```bash
# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒšãƒ¼ã‚¸ã®æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼èµ·å‹•
cd apps/status
npm run start
```

### ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†

```bash
# Prisma Studioã‚’èµ·å‹•ï¼ˆGUIãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ï¼‰
npx prisma studio

# æ–°ã—ã„ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆ
npx prisma migrate dev --name migration_name

# æœ¬ç•ªç’°å¢ƒã¸ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨
npx prisma migrate deploy
```

### ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ­“è¿ã—ã¾ã™ï¼ä»¥ä¸‹ã®æ‰‹é †ã«å¾“ã£ã¦ãã ã•ã„ï¼š

1. ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯
2. ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ (`git checkout -b feature/amazing-feature`)
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ (`git commit -m 'Add some amazing feature'`)
4. ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ (`git push origin feature/amazing-feature`)
5. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ

**ã‚³ãƒ¼ãƒ‰å“è³ªã®ç¢ºä¿ï¼š**
- ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‰ã« `npm run lint` ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„
- æ–°ã—ã„æ©Ÿèƒ½ã«ã¯é©åˆ‡ãªãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã—ã¦ãã ã•ã„
- ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯æ˜ç¢ºã§èª¬æ˜çš„ã«æ›¸ã„ã¦ãã ã•ã„

### ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯[MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹](LICENSE)ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

### ğŸ”— é–¢é€£ãƒªãƒ³ã‚¯

- [TrainLCDå…¬å¼ã‚µã‚¤ãƒˆ](https://trainlcd.com)
- [TrainLCD iOSã‚¢ãƒ—ãƒª](https://apps.apple.com/jp/app/trainlcd/id1486355943)
- [TrainLCD Androidã‚¢ãƒ—ãƒª](https://play.google.com/store/apps/details?id=me.tinykitten.trainlcd)

---

## English

### ğŸ“– Overview

TrainLCD Website is a monorepo project that provides the official web presence for the TrainLCD application. It consists of a landing page and a real-time status page.

### âœ¨ Key Features

- **Landing Page (LP)**: Fast and lightweight marketing site built with Astro
- **Status Page**: Real-time service status monitoring system built with Next.js
  - Real-time status updates (SSE support)
  - Multi-language support (Japanese/English)
  - Incident history management
  - Service status display by category

### ğŸ›  Technology Stack

#### Frameworks & Libraries
- **[Astro](https://astro.build/)** - Fast web framework for landing page
- **[Next.js 16](https://nextjs.org/)** - React App Router based status page
- **[React 19](https://react.dev/)** - UI library
- **[Preact](https://preactjs.com/)** - Lightweight React alternative for Astro app

#### Database & Cache
- **[PostgreSQL](https://www.postgresql.org/)** - Main database
- **[Prisma](https://www.prisma.io/)** - Type-safe ORM and schema management
- **[Redis](https://redis.io/)** - Caching and real-time communication

#### Development Tools
- **[Turborepo](https://turbo.build/)** - High-performance monorepo build system
- **[TypeScript](https://www.typescriptlang.org/)** - Type safety
- **[Vitest](https://vitest.dev/)** - Fast unit testing framework
- **[ESLint](https://eslint.org/)** - Code quality assurance
- **[Tailwind CSS](https://tailwindcss.com/)** - Utility-first CSS framework

### ğŸ“ Project Structure

```
Website/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ lp/              # Landing Page (Astro)
â”‚   â””â”€â”€ status/          # Status Page (Next.js)
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ eslint-config/   # Shared ESLint configuration
â”‚   â””â”€â”€ typescript-config/ # Shared TypeScript configuration
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma    # Database schema
â”‚   â””â”€â”€ seed.ts          # Seed data
â””â”€â”€ turbo.json           # Turborepo configuration
```

### ğŸ“‹ Prerequisites

- **Node.js**: 18 or higher
- **npm**: 10.4.0 or higher
- **PostgreSQL**: Latest stable version
- **Redis**: Latest stable version

### ğŸš€ Setup

#### 1. Clone the Repository

```bash
git clone https://github.com/TrainLCD/Website.git
cd Website
```

#### 2. Install Dependencies

```bash
npm install
```

#### 3. Configure Environment Variables

Copy `.env.example` to `.env` and configure the required environment variables:

```bash
cp .env.example .env
```

**Required Environment Variables:**

```env
# Database connection string
DATABASE_URL="postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public"

# Redis connection string
REDIS_URL="redis://localhost:6379"

# CORS configuration (for /api/status/snapshot endpoint)
ALLOWED_SNAPSHOT_ORIGINS="" # empty=disabled, "*"=allow all, or comma-separated URLs

# Status update API authentication key
STATUS_UPDATE_API_KEY="" # Must be set in production
```

#### 4. Setup Database

```bash
# Generate Prisma client
npx prisma generate

# Run migrations
npx prisma migrate dev

# Seed database (optional)
npm run db:seed
```

### ğŸ’» Development

#### Start All Apps

```bash
npm run dev
```

- Landing Page: http://localhost:4321
- Status Page: http://localhost:3000

#### Start Individual Apps

```bash
# Landing page only
cd apps/lp
npm run dev

# Status page only
cd apps/status
npm run dev
```

### ğŸ§ª Testing and Linting

```bash
# Run ESLint
npm run lint

# Run unit tests (status app)
cd apps/status
npm run test
```

### ğŸ—ï¸ Build

```bash
# Build all apps
npm run build

# Build individual apps
cd apps/lp
npm run build

cd apps/status
npm run build
```

### ğŸ“¦ Production

```bash
# Start status page production server
cd apps/status
npm run start
```

### ğŸ—„ï¸ Database Management

```bash
# Launch Prisma Studio (GUI database browser)
npx prisma studio

# Create a new migration
npx prisma migrate dev --name migration_name

# Apply migrations to production
npx prisma migrate deploy
```

### ğŸ¤ Contributing

Contributions are welcome! Please follow these steps:

1. Fork this repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Create a Pull Request

**Code Quality Guidelines:**
- Run `npm run lint` before creating a pull request
- Add appropriate tests for new features
- Write clear and descriptive commit messages

### ğŸ“„ License

This project is released under the [MIT License](LICENSE).

### ğŸ”— Related Links

- [TrainLCD Official Website](https://trainlcd.com)
- [TrainLCD iOS App](https://apps.apple.com/jp/app/trainlcd/id1486355943)
- [TrainLCD Android App](https://play.google.com/store/apps/details?id=me.tinykitten.trainlcd)
